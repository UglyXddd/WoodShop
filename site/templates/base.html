<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Website{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header id="top" class="header">
        <div class="header-container">
            <div class="header-content">
                <div class="logo">
                    <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏" />
                    <h1>WOODSHOP</h1>
                </div>
                <div class="flex-container">
                    <a id="home-link" href="{{ url_for('index') }}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a id="about-link" href="{{ url_for('about') }}" class="nav-link">–û –Ω–∞—Å</a>
                    <div id="catalog-link" class="dropdown-catalog nav-link">
                        <a href="{{ url_for('catalog') }}" class="nav-link-kat">–ö–∞—Ç–∞–ª–æ–≥</a>
                        <div class="dropdown-content-catalog">
                            <div class="submenu">
                                <a href="#">–°—Ç–æ–ª–µ—à–Ω–∏—Ü—ã <span class="arrow">&#9654;</span></a>
                                <div class="dropdown-content-submenu">
                                    <a href="#">–î–µ—Ä–µ–≤—è–Ω–Ω—ã–µ</a>
                                    <a href="#">–ñ–µ–ª–µ–∑–Ω—ã–µ</a>
                                </div>
                            </div>
                            <a href="#">–°—Ç—É–ª—å—è</a>
                            <a href="#">–®–∫–∞—Ñ—ã</a>
                            <a href="#">–ö—Ä–µ—Å–ª–∞</a>
                            <a href="#">–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</a>
                            <a href="#">–°–∫–∞–º–µ–π–∫–∏</a>
                            <a href="#">–ö—Ä–æ–≤–∞—Ç–∏</a>
                            <a href="#">–î–µ–∫–æ—Ä</a>
                        </div>
                    </div>
                    <a id="contact-link" href="{{ url_for('contact') }}" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                    <a id="faq-link" href="{{ url_for('faq') }}" class="nav-link">FAQ</a>
                </div>
                <div class="icon-container">
                    <a href="{{ url_for('shopping_cart') }}" class="icon">
                        üõí
                        <span id="cart-count" class="cart-count">12</span>
                    </a>
                    <div class="dropdown-profile">
                        <span class="icon" id="profile-menu-toggle">üë§</span>
                        <div class="dropdown-content-profile" id="profile-menu">
                            {% if current_user.is_authenticated %}
                                <p>{{ current_user.first_name }} {{ current_user.second_name }}{% if current_user.father_name %} {{ current_user.father_name }}{% endif %}</p>
                                <a href="{{ url_for('order_history') }}">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</a>
                                <a href="{{ url_for('logout') }}">–í—ã—Ö–æ–¥</a>
                            {% else %}
                                <a href="{{ url_for('login') }}">–í–æ–π—Ç–∏</a>
                                <a href="{{ url_for('reg') }}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="menu-icon">
                        <img src="{{ url_for('static', filename='img/menu-icon.png') }}" alt="Menu Icon" />
                    </div>
                    <div class="mobile-menu">
                        <a id="home-link" href="{{ url_for('index') }}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                        <a id="about-link" href="{{ url_for('about') }}" class="nav-link">–û –Ω–∞—Å</a>
                        <a href="{{ url_for('catalog') }}" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
                        <a id="contact-link" href="{{ url_for('contact') }}" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                        <a id="faq-link" href="{{ url_for('faq') }}" class="nav-link">FAQ</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        {% block content %}{% endblock %}
        <div id="cart-notification" class="cart-notification">
            –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!
            <span class="close-btn">&times;</span>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <!-- –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ -->
                <div class="footer-dropdown">
                    <button class="dropdown-button">
                        –ö–æ–Ω—Ç–∞–∫—Ç—ã <span class="arrow">&#9654;</span>
                    </button>
                    <div class="footer-dropdown-content">
                        <p>–ê–¥—Ä–µ—Å<br />–ú–æ—Å–∫–≤–∞, –í–µ—à–Ω–∏—Ö –í–æ–¥, –¥ 14, —Å—Ç—Ä.2</p>
                        <p>Email<br />contact@gmail.com</p>
                        <p>–¢–µ–ª–µ—Ñ–æ–Ω<br />+79182315619</p>
                    </div>
                </div>

                <div class="footer-dropdown">
                    <button class="dropdown-button">
                        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è <span class="arrow">&#9654;</span>
                    </button>
                    <div class="footer-dropdown-content">
                        <p><a href="#">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a></p>
                        <p><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></p>
                        <p><a href="#">–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a></p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="footer-copyright">
                        <p>¬© 2024 WOODSHOP. All rights reserved.</p>
                    </div>
                </div>
                <!-- –°—Ç–∞—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ—É—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–∫—Ä—ã—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö -->
                <div class="footer-info">
                    <p><em>–ö–æ–Ω—Ç–∞–∫—Ç—ã</em></p>
                    <p>–ê–¥—Ä–µ—Å<br />–ú–æ—Å–∫–≤–∞, –í–µ—à–Ω–∏—Ö –í–æ–¥, –¥ 14, —Å—Ç—Ä.2</p>
                    <p>Email<br />contact@gmail.com</p>
                    <p>–¢–µ–ª–µ—Ñ–æ–Ω<br />+79182315619</p>
                </div>
                <div class="footer-catalog-1">
                    <p>–°—Ç–æ–ª–µ—à–Ω–∏—Ü—ã</p>
                    <p>–°—Ç—É–ª—å—è</p>
                    <p>–®–∫–∞—Ñ—ã</p>
                    <p>–ö—Ä–µ—Å–ª–∞</p>
                </div>
                <div class="footer-catalog-2">
                    <p>–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏</p>
                    <p>–°–∫–∞–º–µ–π–∫–∏</p>
                    <p>–ö—Ä–æ–≤–∞—Ç–∏</p>
                    <p>–î–µ–∫–æ—Ä</p>
                </div>
                <div class="footer-brand">
                    <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="Logo Image" class="logo-image" />
                    <div>
                        <h2 class="naming">WOODSHOP</h2>
                        <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</p>
                        <p>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</p>
                        <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
                    </div>
                    <div class="footer-images">
                        <img src="{{ url_for('static', filename='img/tg-logo.png') }}" alt="Telegram" />
                        <img src="{{ url_for('static', filename='img/vk-logo.png') }}" alt="Vkontakte" />
                        <img src="{{ url_for('static', filename='img/whatsapp-logo.png') }}" alt="WhatsApp" />
                    </div>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>

<script>
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
    const currentLocation = window.location.pathname;
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–ª–∞—Å—Å active –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç <a>
    if (currentLocation === '/') {
        document.getElementById('home-link').classList.add('active');
    } else if (currentLocation.includes('/about')) {
        document.getElementById('about-link').classList.add('active');
    } else if (currentLocation.includes('/catalog')) {
        document.getElementById('catalog-link').classList.add('active');
    } else if (currentLocation.includes('/contact')) {
        document.getElementById('contact-link').classList.add('active');
    } else if (currentLocation.includes('/faq')) {
        document.getElementById('faq-link').classList.add('active');
    }

//show/hide profile
    document.addEventListener('DOMContentLoaded', function() {
        const profileMenuToggle = document.getElementById('profile-menu-toggle');
        const profileMenu = document.getElementById('profile-menu');

        profileMenuToggle.addEventListener('click', function() {
            if (profileMenu.classList.contains('show')) {
                profileMenu.classList.remove('show');
                profileMenu.classList.add('hide');
            } else {
                profileMenu.classList.remove('hide');
                profileMenu.classList.add('show');
            }
        });

        document.addEventListener('click', function(event) {
            if (!profileMenu.contains(event.target) && !profileMenuToggle.contains(event.target)) {
                profileMenu.classList.remove('show');
                profileMenu.classList.add('hide');
            }
        });
    });

function updateCartCount() {
    const cartCountElem = document.getElementById('cart-count'); // –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let itemCount = 0; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤

    cart.forEach(item => {
        itemCount += item.quantity; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
    });

    if (cartCountElem) {
        cartCountElem.textContent = itemCount; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –∏–∫–æ–Ω–∫–µ
    }
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', updateCartCount);

document.addEventListener('DOMContentLoaded', function() {
    // –ú–µ–Ω—é –≤ —Ö–µ–¥–µ—Ä–µ
    const menuIcon = document.querySelector('.menu-icon');
    const mobileMenu = document.querySelector('.mobile-menu');

    menuIcon.addEventListener('click', function() {
        menuIcon.classList.toggle('active');
        mobileMenu.classList.toggle('open');
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä–æ–ø–¥–∞—É–Ω–∞ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —ç–∫—Ä–∞–Ω–∞
    window.addEventListener('resize', function() {
        if (window.innerWidth > 1600) {
            mobileMenu.classList.remove('open');
            menuIcon.classList.remove('active');
        }
    });

    // –í—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é –≤ —Ñ—É—Ç–µ—Ä–µ
    const footerDropdowns = document.querySelectorAll('.footer-dropdown');

    footerDropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('.dropdown-button');
        button.addEventListener('click', function(event) {
            dropdown.classList.toggle('open');
        });
    });
});
</script>